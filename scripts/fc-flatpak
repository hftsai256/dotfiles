#!/usr/bin/env bash

# Source directory containing your fontconfig
USER_FONTCONFIG_DIR="$HOME/.config/fontconfig/conf.d"

# Ensure it exists
if [ ! -d "$USER_FONTCONFIG_DIR" ]; then
  echo "‚ùå No fontconfig directory found at $USER_FONTCONFIG_DIR"
  exit 1
fi

# Get list of all installed Flatpak app IDs
APP_IDS=$(flatpak list --app --columns=application)

# Loop over each app and copy config
for app_id in $APP_IDS; do
  TARGET_DIR="$HOME/.var/app/$app_id/config/fontconfig/conf.d"
  mkdir -p "$TARGET_DIR"

  echo "üîÑ Syncing fontconfig to $app_id"
  cp "$USER_FONTCONFIG_DIR"/*.conf "$TARGET_DIR/"
done

echo "‚úÖ Fontconfig synced to all Flatpak apps."
echo "‚ÑπÔ∏è Restart apps to apply changes."
